- defaults:
    link:
      force: true

- link:
    ~/.config/kitty: .config/kitty
    ~/.local/share/applications/kitty.desktop: .local/share/applications/kitty.desktop
    ~/bin/kitty-update.sh: bin/kitty-update.sh
    ~/.zshrc: .zshrc
    ~/bin/OneDriveCloudMount.sh: bin/OneDriveCloudMount.sh
    ~/.local/share/applications/OneDriveCloudMount.desktop: .local/share/applications/OneDriveCloudMount.desktop
    ~/.vimrc: .vimrc
    ~/.zshrc: .zshrc
    ~/.config/zsh: .config/zsh
    ~/.local/share/applications/kitty.desktop: .local/share/applications/kitty.desktop

- shell:
    - echo "ðŸ± Installing Kitty terminal to /opt"
    - '[ -d /opt/kitty ] || sudo sh -c "curl -L https://sw.kovidgoyal.net/kitty/installer.sh | sh /dev/stdin dest=/opt/kitty"'

    - echo "ðŸ”— Linking kitty to ~/.local/bin"
    - mkdir -p ~/.local/bin
    - ln -sf /opt/kitty/kitty.app/bin/kitty ~/.local/bin/kitty

    - echo "ðŸ“‚ Ensuring ~/.local/share/applications exists"
    - mkdir -p ~/.local/share/applications

    - echo "ðŸ“¦ Checking for Git"
    - 'which git || (echo "Installing Git..." && sudo apt install -y git)'

    - echo "ðŸ“¦ Installing CLI tools"
    - sudo apt install -y ripgrep fzf bat eza fd-find tldr

    - echo "ðŸ”— Creating fd and bat symlinks"
    - mkdir -p ~/bin
    - ln -sf $(which fdfind) ~/bin/fd
    - ln -sf $(which batcat) ~/bin/bat

    - echo "ðŸ“¦ Installing VSCodium"
    - 'wget -qO - https://gitlab.com/paulcarroty/vscodium-deb-rpm-repo/raw/master/pub.gpg | gpg --dearmor | sudo tee /usr/share/keyrings/vscodium-archive-keyring.gpg > /dev/null'
    - 'echo "deb [signed-by=/usr/share/keyrings/vscodium-archive-keyring.gpg] https://download.vscodium.com/debs vscodium main" | sudo tee /etc/apt/sources.list.d/vscodium.list'
    - sudo apt update
    - sudo apt install -y codium

    - echo "ðŸ“¦ Installing Zsh"
    - sudo apt install -y zsh
    - echo "âœ… Done installing core components"
