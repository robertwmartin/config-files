- defaults:
    link:
      force: true

# â”€â”€â”€â”€â”€â”€ Put any potentially repeated directory commands here â”€â”€â”€â”€â”€â”€
- shell:
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - echo " Creating common directories        "
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - description: "Create common directories now so that symlinks created below don't fail"
      command: |
        mkdir -p ~/bin
        mkdir -p ~/.local/bin
        mkdir -p ~/.local/share/applications
        mkdir -p ~/.config
        mkdir -p ~/.config/VSCodium/User
        mkdir -p ~/.config/kitty


# â”€â”€â”€â”€â”€â”€ ðŸ± Kitty Terminal Setup â”€â”€â”€â”€â”€â”€
- shell:
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - echo "ðŸ± Installing Kitty terminal to /opt"
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - description: "Install Kitty terminal to /opt and create required symlink to ~/.local/bin"
      command: |
        '[ -d /opt/kitty ] || sudo sh -c "curl -L https://sw.kovidgoyal.net/kitty/installer.sh | sh /dev/stdin dest=/opt/kitty"'
        ln -sf /opt/kitty/kitty.app/bin/kitty ~/.local/bin/kitty

# â”€â”€â”€â”€â”€â”€ Git should be installed but just in case as it is essential â”€â”€â”€â”€â”€
- shell:
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - echo "ðŸ“¦ Checking for Git                 "
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - description: "Installing git if it does not exist via sudo apt"
      command: 'which git || (echo "Installing Git..." && sudo apt install -y git)'

# â”€â”€â”€â”€â”€â”€ Install full Vim since Ubuntu 24.04 only installs tiny vim  â”€â”€â”€â”€â”€
- shell:
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - echo " Install full Vim editor            "
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - description: "Install full Vim editor"
      command: sudo apt install -y vim


# â”€â”€â”€â”€â”€â”€ Install useful CLI developer tools that don't come with Ubuntu 24.04  â”€â”€â”€â”€â”€
- shell:
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - echo "ðŸ“¦ Installing CLI tools             "
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - description: "Install useful CLI tools that don't come with Ubuntu 24.04 - ripgrep fzf bat fd-find tldr"
      command: sudo apt install -y ripgrep fzf bat fd-find tldr lsd

# â”€â”€â”€â”€â”€â”€ Both fd and bat require specifc symlinks â”€â”€â”€â”€â”€
- shell:
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - echo "ðŸ”— Creating fd and bat symlinks     "
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - description: "Both fd and bat require specific symlinks"
      command: |
       ln -sf $(which fdfind) ~/bin/fd
       ln -sf $(which batcat) ~/bin/bat

# â”€â”€â”€â”€â”€â”€ Install VSCodium to get the benefits of VS Code without the telemetry â”€â”€â”€â”€â”€
- shell:
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - echo "ðŸ“¦ Installing VSCodium              "
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - description: "Add VSCodium repo and install via APT"
      command: |
        wget -qO - https://gitlab.com/paulcarroty/vscodium-deb-rpm-repo/raw/master/pub.gpg | gpg --dearmor | sudo tee /usr/share/keyrings/vscodium-archive-keyring.gpg > /dev/null
        echo "deb [signed-by=/usr/share/keyrings/vscodium-archive-keyring.gpg] https://download.vscodium.com/debs vscodium main" | sudo tee /etc/apt/sources.list.d/vscodium.list
        sudo apt update
        sudo apt install -y codium

# â”€â”€â”€â”€â”€â”€ Install VSCodium extensions  â”€â”€â”€â”€â”€
- shell:
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - echo "ðŸ“¦ Installing VSCodium extensions   "
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - description: "Add VSCodium extensions listed in vscodium-extensions.txt in repo"
      command: ~/config-files/bin/install-vscodium-extensions.sh

# â”€â”€â”€â”€â”€â”€ Install Zsh and make sure it is the default shell for the installer â”€â”€â”€â”€â”€
- shell:
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - echo "ðŸ“¦ Installing Zsh                   "
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - description: "Install Zsh" 
      command: sudo apt install -y zsh

# â”€â”€â”€â”€â”€â”€ Ensure kitty is launchable from the GUI â”€â”€â”€â”€â”€
- shell:
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - echo " Confirm kitty.desktop is installed "
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - description: "Fix kitty.desktop launcher entry"
      command: ~/config-files/bin/fix-kitty-desktop.sh

# â”€â”€â”€â”€â”€â”€ No more commands to install â”€â”€â”€â”€â”€
- shell:
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - echo " âœ… Done installing core components "
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"

# â”€â”€â”€â”€â”€â”€ Create any remaining required symlinks â”€â”€â”€â”€â”€
- link:
    ~/.zshrc: .zshrc
    ~/bin/kitty-update.sh: bin/kitty-update.sh
    ~/bin/OneDriveCloudMount.sh: bin/OneDriveCloudMount.sh
    ~/.local/share/applications/OneDriveCloudMount.desktop: .local/share/applications/OneDriveCloudMount.desktop
    ~/.vimrc: .vimrc
    ~/.config/zsh: .config/zsh
    ~/.config/kitty/kitty.conf:
      path: .config/kitty/kitty.conf
      force: true
    ~/.config/VSCodium/User/settings.json: .config/VSCodium/User/settings.json
    ~/.config/VSCodium/User/keybindings.json: .config/VSCodium/User/keybindings.json

# â”€â”€â”€â”€â”€â”€ Display notification to run chsh command â”€â”€â”€â”€â”€
- shell:
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    - echo " Zsh is not the default shell       "
    - echo " Run this command from the prompt   "
    - echo " and then log out and log back in   "
    - echo "                                    "
    - echo " chsh -s $(command -v zsh)          "
    - echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"

